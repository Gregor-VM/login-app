(this["webpackJsonplogin-app"]=this["webpackJsonplogin-app"]||[]).push([[0],{41:function(e,t,r){},53:function(e,t,r){"use strict";r.r(t);var n=r(2),c=r.n(n),a=r(28),s=r.n(a),i=(r(41),r(3)),l=r.n(i),o=r(9),u=r(8),d=r(13),b=r(26);r(43),r(54);b.a.initializeApp({apiKey:"AIzaSyDBoyvAqh7Ww0SeZ1Hi2s26_TdiO7FZPlE",authDomain:"login-app-95884.firebaseapp.com",projectId:"login-app-95884",storageBucket:"login-app-95884.appspot.co",messagingSenderId:"460461185126",appId:"1:460461185126:web:af022a863559380f9875a7"});var j=new b.a.auth.GoogleAuthProvider,m=function(){h.signInWithPopup(j)},p=function(){h.signInAnonymously()},h=b.a.auth(),f=b.a.firestore(),O=function(e){return Object(n.useEffect)((function(){document.body.className=e?"body_animation":""}),[e])},x=function(e,t,r,n){var c=!1,a=!1;return""===e?r("Email field can't be empty"):(c=!0,r(void 0)),""===t?n("Password field can't be empty"):t.length<6?n("The password is too short"):(a=!0,n(void 0)),[c,a]},v=function(e,t,r,n,c){var a=!1,s=!1;return""===e?r("Email field can't be empty"):(r(void 0),a=!0),""===t?n("Password field can't be empty"):t!==c?n("The password doesn't match"):t.length<6?n("The password is too short"):(n(void 0),s=!0),[a,s]},g=r(7),N={SET_USER:"SET_USER",ADD_ARTICLE:"ADD_ARTICLE",SET_ARTICLE:"SET_ARTICLE",SET_EDITING:"SET_EDITING",SET_EDITING_DOC:"SET_EDITING_DOC",SET_PROFILE_ID:"SET_PROFILE_ID"},y={setUser:function(e){return{type:N.SET_USER,payload:e}}},w=r(11);function k(e){f.collection("users").doc(e.id).set(e)}var E=function(){var e=Object(g.b)(),t=Object(w.f)();Object(n.useEffect)((function(){return h.onAuthStateChanged(function(){var r=Object(o.a)(l.a.mark((function r(n){var c,a,s;return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(null!==n){r.next=2;break}return r.abrupt("return",null);case 2:return r.next=4,f.collection("users").doc(n.uid).get();case 4:if(c=r.sent,a={},c.exists){r.next=11;break}k(a={name:n.displayName,email:n.email,photoURL:n.photoURL,id:n.uid}),r.next=15;break;case 11:return r.next=13,f.collection("users").where("id","==",n.uid).get();case 13:s=r.sent,a=s.docs[0].data();case 15:e(y.setUser(a)),t.push("/home");case 17:case"end":return r.stop()}}),r)})));return function(e){return r.apply(this,arguments)}}())}),[e,t])},S=r(1);var I=function(){var e=Object(n.useState)(void 0),t=Object(u.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(void 0),s=Object(u.a)(a,2),i=s[0],b=s[1],j=Object(n.useRef)(),f=Object(n.useRef)(),v=function(){var e=Object(o.a)(l.a.mark((function e(t){var r,n,a,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=j.current.value,n=f.current.value,t.preventDefault(),a=x(r,n,c,b),s=Object(u.a)(a,2),i=s[0],o=s[1],!i||!o){e.next=13;break}return e.prev=5,e.next=8,h.signInWithEmailAndPassword(r,n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),c(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}();return E(),O(!0),Object(S.jsx)("div",{className:"container d-flex align-items-center justify-content-center vh100",children:Object(S.jsxs)("div",{className:"card p-5",children:[Object(S.jsx)("div",{className:"card-title",children:Object(S.jsx)("h1",{className:"display-4 text-center",children:"Sign In"})}),Object(S.jsxs)("div",{className:"card-body p-0",children:[Object(S.jsxs)("form",{onSubmit:v,children:[Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{htmlFor:"email",children:"Email"}),Object(S.jsx)("input",{ref:j,id:"email",type:"email",className:"form-control "+(r&&"is-invalid"),placeholder:"Enter your email..."}),r&&Object(S.jsx)("div",{className:"invalid-feedback",children:r})]}),Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)("input",{ref:f,id:"password",type:"password",className:"form-control "+(i&&"is-invalid"),placeholder:"Enter your password..."}),i&&Object(S.jsx)("div",{className:"invalid-feedback",children:i})]}),Object(S.jsx)("div",{className:"form-group row",children:Object(S.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-2",children:"Sign In"})})]}),Object(S.jsx)("p",{className:"text-center",children:"or"}),Object(S.jsxs)("button",{className:"btn btn-outline-danger btn-block mb-2",onClick:function(){m()},children:[Object(S.jsx)("i",{className:"fab fa-google mr-2"}),"Sign In With Google"]}),Object(S.jsxs)("button",{className:"btn btn-outline-secondary btn-block mb-2",onClick:function(){p()},children:[Object(S.jsx)("i",{className:"fas fa-mask mr-2"}),"Login Guest"]})]}),Object(S.jsxs)("small",{className:"text-center",children:["Don't you have an account yet? ",Object(S.jsx)(d.b,{to:"/signup",children:"Sign Up here!"})]}),Object(S.jsx)("small",{className:"text-center",children:Object(S.jsx)(d.b,{to:"/recover",children:"Forgot Password?"})})]})})};var A=function(){var e=Object(n.useState)(void 0),t=Object(u.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)(void 0),s=Object(u.a)(a,2),i=s[0],b=s[1],j=Object(n.useRef)(),f=Object(n.useRef)(),x=Object(n.useRef)(),g=function(){var e=Object(o.a)(l.a.mark((function e(t){var r,n,a,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=j.current.value,n=f.current.value,t.preventDefault(),a=v(r,n,c,b,x.current.value),s=Object(u.a)(a,2),i=s[0],o=s[1],!i||!o){e.next=13;break}return e.prev=5,e.next=8,h.createUserWithEmailAndPassword(r,n);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(5),c(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}();return E(),O(!0),Object(S.jsx)("div",{className:"container d-flex align-items-center justify-content-center vh100",children:Object(S.jsxs)("div",{className:"card p-4",children:[Object(S.jsx)("div",{className:"card-title",children:Object(S.jsx)("h1",{className:"display-4 text-center m-0",children:"Sign Up"})}),Object(S.jsx)("div",{className:"card-body px-4 m-0 py-0",children:Object(S.jsxs)("form",{onSubmit:g,children:[Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{htmlFor:"email",children:"Email"}),Object(S.jsx)("input",{ref:j,id:"email",type:"email",className:"form-control "+(r&&"is-invalid"),placeholder:"Enter your email..."}),r&&Object(S.jsx)("div",{className:"invalid-feedback",children:r})]}),Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{htmlFor:"password",children:"Password"}),Object(S.jsx)("input",{ref:f,id:"password",type:"password",className:"form-control "+(i&&"is-invalid"),placeholder:"Enter your password..."}),i&&Object(S.jsx)("div",{className:"invalid-feedback",children:i})]}),Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{htmlFor:"confirmpassword",children:"Confirm password"}),Object(S.jsx)("input",{ref:x,id:"confirmpassword",type:"password",className:"form-control "+(i&&"is-invalid"),placeholder:"Confirm your password..."}),i&&Object(S.jsx)("div",{className:"invalid-feedback",children:i})]}),Object(S.jsx)("div",{className:"form-group row",children:Object(S.jsx)("button",{type:"submit",className:"btn btn-primary btn-block mt-2",children:"Sign Up"})})]})}),Object(S.jsx)("p",{className:"text-center m-0 mb-3",children:"or"}),Object(S.jsxs)("button",{className:"btn btn-outline-danger btn-block mb-2",onClick:function(){m()},children:[Object(S.jsx)("i",{className:"fab fa-google mr-2"}),"Sign Up With Google"]}),Object(S.jsxs)("button",{className:"btn btn-outline-secondary btn-block mb-2",onClick:function(){p()},children:[Object(S.jsx)("i",{className:"fas fa-mask mr-2"}),"Continue As Guest"]}),Object(S.jsxs)("small",{className:"text-center",children:["Do you already have an account?",Object(S.jsx)(d.b,{to:"/signin",children:" Sign In here!"})]})]})})},T=r(6),_={setArticles:function(e){return{type:N.SET_ARTICLE,payload:e}},addArticle:function(e){return{type:N.ADD_ARTICLE,payload:e}}},D=r(31);function R(e){return C.apply(this,arguments)}function C(){return(C=Object(o.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("users").doc(t).get();case 2:return r=e.sent,n=r.data(),e.abrupt("return",{name:n.name,photoURL:n.photoURL});case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var U={firstArticles:function(){var e=Object(o.a)(l.a.mark((function e(){var t,r,n,c,a,s,i,o,u,d,b,j,m,p=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=p.length>0&&void 0!==p[0]&&p[0],r={},t&&(r=f.collection("articles").where("user_id","==",t).orderBy("date","desc")),t||(r=f.collection("articles").orderBy("date","desc")),e.next=6,r.limit(10).get();case 6:n=e.sent,c=[],a="",s=Object(D.a)(n.docs),e.prev=10,s.s();case 12:if((i=s.n()).done){e.next=25;break}return o=i.value,u=o.data(),d=o.id,e.next=18,R(u.user_id);case 18:b=e.sent,j=b.name,m=b.photoURL,c.push(Object(T.a)(Object(T.a)({},u),{},{itemId:d,name:j,photoURL:m})),a=o;case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),s.e(e.t0);case 30:return e.prev=30,s.f(),e.finish(30);case 33:return e.abrupt("return",{articles:c,lastKey:a});case 34:case"end":return e.stop()}}),e,null,[[10,27,30,33]])})));return function(){return e.apply(this,arguments)}}(),nextArticles:function(){var e=Object(o.a)(l.a.mark((function e(t){var r,n,c,a,s,i,o,u,d,b,j,m,p,h=arguments;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=h.length>1&&void 0!==h[1]&&h[1],n={},r&&(n=f.collection("articles").where("user_id","==",r).orderBy("date","desc")),r||(n=f.collection("articles").orderBy("date","desc")),e.next=6,n.startAfter(t).limit(10).get();case 6:c=e.sent,a=[],s="",i=Object(D.a)(c.docs),e.prev=10,i.s();case 12:if((o=i.n()).done){e.next=25;break}return u=o.value,d=u.data(),b=u.id,e.next=18,R(d.user_id);case 18:j=e.sent,m=j.name,p=j.photoURL,a.push(Object(T.a)(Object(T.a)({},d),{},{itemId:b,name:m,photoURL:p})),s=u;case 23:e.next=12;break;case 25:e.next=30;break;case 27:e.prev=27,e.t0=e.catch(10),i.e(e.t0);case 30:return e.prev=30,i.f(),e.finish(30);case 33:return e.abrupt("return",{articles:a,lastKey:s});case 34:case"end":return e.stop()}}),e,null,[[10,27,30,33]])})));return function(t){return e.apply(this,arguments)}}(),addArticle:function(){var e=Object(o.a)(l.a.mark((function e(t,r){var n,c,a,s,i,o;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new Date,c={user_id:t.id,text:r,date:"".concat(n.getUTCDay(),"/").concat(n.getUTCMonth(),"/").concat(n.getUTCFullYear()," at ").concat(n.getUTCHours(),":").concat(n.getUTCMinutes(),":").concat(n.getUTCSeconds())},e.prev=2,e.next=5,f.collection("articles").add(c);case 5:return a=e.sent,s={msg:"Articulo enviado!",error:!1},i=Object(T.a)(Object(T.a)({},c),{},{itemId:a.id}),e.abrupt("return",{msg:s,finalArticle:i});case 11:return e.prev=11,e.t0=e.catch(2),o={msg:e.t0.message,error:!0},e.abrupt("return",{msg:o});case 15:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,r){return e.apply(this,arguments)}}(),updateArticle:function(){var e=Object(o.a)(l.a.mark((function e(t,r){var n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Object(T.a)(Object(T.a)({},t),{},{text:r,date:t.date.includes("(editado")?t.date:t.date+" (editado)"}),e.prev=1,e.next=4,f.collection("articles").doc(t.itemId).update(n);case 4:return c={msg:"Articulo actualizado!",error:!1},e.abrupt("return",{msg:c,finalArticle:n});case 8:return e.prev=8,e.t0=e.catch(1),a={msg:e.t0.message,error:!0},e.abrupt("return",{msg:a});case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}(),getUserInfoById:function(){var e=Object(o.a)(l.a.mark((function e(t){var r,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("users").doc(t).get();case 2:return r=e.sent,n=r.data(),e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),deleteAccount:function(){var e=Object(o.a)(l.a.mark((function e(t){var r,n,c,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.collection("users").doc(t).delete();case 3:return e.next=5,f.collection("articles").where("user_id","==",t).get();case 5:r=e.sent,n=Object(D.a)(r.docs),e.prev=7,n.s();case 9:if((c=n.n()).done){e.next=15;break}return a=c.value,e.next=13,a.ref.delete();case 13:e.next=9;break;case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(7),n.e(e.t0);case 20:return e.prev=20,n.f(),e.finish(20);case 23:return e.abrupt("return",!0);case 26:return e.prev=26,e.t1=e.catch(0),e.abrupt("return",!1);case 29:case"end":return e.stop()}}),e,null,[[0,26],[7,17,20,23]])})));return function(t){return e.apply(this,arguments)}}(),thisNameExists:function(){var e=Object(o.a)(l.a.mark((function e(t){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,f.collection("users").where("name","==",t).get();case 3:return r=e.sent,e.abrupt("return",r);case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",!1);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),updateNameAndPhoto:function(){var e=Object(o.a)(l.a.mark((function e(t,r,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.collection("users").doc(n).update({name:t,photoURL:r});case 2:case"end":return e.stop()}}),e)})));return function(t,r,n){return e.apply(this,arguments)}}()},L={setEditing:function(e){return{type:N.SET_EDITING,payload:e}},setEditingDoc:function(e){return{type:N.SET_EDITING_DOC,payload:e}}};var P=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),r=t[0],c=t[1],a=Object(n.useState)({msg:"",error:!1}),s=Object(u.a)(a,2),i=s[0],d=s[1],b=Object(n.useState)(!1),j=Object(u.a)(b,2),m=j[0],p=j[1],h=Object(g.c)((function(e){return e.user.user})),f=Object(g.c)((function(e){return e.editing})),O=Object(g.c)((function(e){return e.articles.articles})),x=Object(g.b)();Object(n.useEffect)((function(){f.editing&&c(f.editingDoc.text)}),[f]),Object(n.useEffect)((function(){var e=localStorage.getItem("eraser");e&&c(e)}),[]);var v=function(){var e=Object(o.a)(l.a.mark((function e(t){var n,a,s,o,u,b,j;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),p(!0),""!==r){e.next=5;break}return p(!1),e.abrupt("return",d({msg:"Tu mensaje est\xe1 vacio!",error:!0}));case 5:if(!f.editing){e.next=25;break}return e.prev=6,e.next=9,U.updateArticle(f.editingDoc,r);case 9:return n=e.sent,a=n.msg,s=n.finalArticle,d(a),x(_.setArticles(O.map((function(e){return e.itemId===s.itemId?Object(T.a)(Object(T.a)({},e),{},{text:s.text,date:s.date}):e})))),x(L.setEditing(!1)),x(L.setEditingDoc({})),c(""),p(!1),e.abrupt("return",null);case 21:e.prev=21,e.t0=e.catch(6),d(i),p(!1);case 25:return e.prev=25,e.next=28,U.addArticle(h,r);case 28:o=e.sent,u=o.msg,b=o.finalArticle,d(u),b&&x(_.addArticle(b)),b&&localStorage.removeItem("eraser"),c(""),p(!1),e.next=43;break;case 38:e.prev=38,e.t1=e.catch(25),j=e.t1.msg,d(j),p(!1);case 43:case"end":return e.stop()}}),e,null,[[6,21],[25,38]])})));return function(t){return e.apply(this,arguments)}}();return Object(S.jsx)("div",{className:"card mt-md-3 row mx-md-1 shadow-sm",children:Object(S.jsxs)("div",{className:"card-body col-12",children:[Object(S.jsx)("div",{className:"form-group",children:Object(S.jsx)("textarea",{onChange:function(e){return c(e.target.value)},value:r,rows:"6",className:"form-control",placeholder:"Write something interesting and share it..."})}),""!==i.msg&&Object(S.jsx)("div",{className:"alert alert-"+(i.error?"danger":"success"),children:i.msg}),Object(S.jsx)("button",{type:"submit",className:"btn btn-success",onClick:v,disabled:m,children:f.editing?"Update":"Share"}),f.editing&&Object(S.jsx)("button",{className:"btn btn-danger ml-2",onClick:function(){x(L.setEditingDoc({})),x(L.setEditing(!1)),c("")},children:"Cancel"}),!f.editing&&Object(S.jsx)("button",{className:"btn btn-outline-secondary ml-2",onClick:function(e){e.preventDefault(),localStorage.setItem("eraser",r),d({msg:"Your text in save in this device",error:!1})},children:"Save"})]})})},F={setProfileId:function(e){return{type:N.SET_PROFILE_ID,payload:e}}};var G=function(e){var t=e.user,r=Object(g.b)(),n=Object(w.f)(),c=n.location.pathname;return Object(S.jsxs)("nav",{className:"navbar navbar-light bg-light",children:[Object(S.jsxs)("a",{className:"navbar-brand",href:"/#",onClick:function(e){e.preventDefault(),r(F.setProfileId(t.id)),n.push("/profile")},children:[null!==t.photoURL?Object(S.jsx)("img",{src:t.photoURL,width:"30",height:"30",className:"d-inline-block align-top rounded-circle mr-2",alt:"avatar"}):Object(S.jsx)("i",{className:"fas fa-user-alt mr-2"}),null===t.name?"An\xf3nimo":t.name]}),Object(S.jsxs)("ul",{className:"navbar-nav d-flex flex-row",children:[Object(S.jsx)("li",{className:(c.includes("/home")?"active":"")+" nav-item mx-2",children:Object(S.jsxs)(d.b,{className:"nav-link",to:"/home",children:[Object(S.jsx)("i",{className:"fas fa-home mx-1 my-0"}),"Home",Object(S.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(S.jsx)("li",{className:(c.includes("/settings")?"active":"")+" nav-item mx-2",children:Object(S.jsxs)(d.b,{className:"nav-link",to:"/settings",children:[Object(S.jsx)("i",{className:"fas fa-cog mx-1"}),"Settings",Object(S.jsx)("span",{className:"sr-only",children:"(current)"})]})}),Object(S.jsx)("li",{className:"nav-item mx-2",children:Object(S.jsxs)("a",{className:"nav-link",href:"/#",onClick:function(e){e.preventDefault(),h.signOut(),n.push("/signin"),r(y.setUser({}))},children:[Object(S.jsx)("i",{className:"fas fa-sign-out-alt mx-1"}),"Logout",Object(S.jsx)("span",{className:"sr-only",children:"(current)"})]})})]})]})},B=r(20);var W=function(e){var t=e.center;return e.sm?Object(S.jsx)("div",{class:"spinner-border spinner-border-sm",role:"status",children:Object(S.jsx)("span",{class:"sr-only",children:"Loading..."})}):t?Object(S.jsx)("div",{className:"w-100 text-center",children:Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(S.jsx)("div",{className:"spinner-border",role:"status",children:Object(S.jsx)("span",{className:"sr-only",children:"Loading..."})})};var Y=function(e){var t=e.name,r=e.photoURL,c=e.text,a=e.date,s=e.user_id,i=e.itemId,d=Object(n.useState)(!1),b=Object(u.a)(d,2),j=b[0],m=b[1],p=Object(g.c)((function(e){return e.user.user.id})),h=Object(g.c)((function(e){return e.articles.articles})),O=p===s,x=Object(w.g)().pathname.includes("/profile"),v=Object(g.b)(),N=Object(w.f)();function y(){return(y=Object(o.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Are you sure to delete this item?")){e.next=7;break}return m(!0),e.next=4,f.collection("articles").doc(i).delete();case 4:t=h.filter((function(e){return e.itemId!==i})),v(_.setArticles(t)),m(!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(){return(k=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:v(L.setEditing(!0)),v(L.setEditingDoc({text:c,date:a,itemId:i})),x&&N.push("/home");case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(S.jsxs)("div",{className:"card shadow-sm p-4 row my-4",children:[Object(S.jsx)("div",{className:"card-title",children:Object(S.jsxs)("div",{className:"d-flex justify-content-between flex-md-row flex-column",children:[Object(S.jsxs)("div",{className:"hover_blue",onClick:function(){v(F.setProfileId(s)),N.push("/profile")},children:[null!==r?Object(S.jsx)("img",{src:r,alt:t+" profile",width:"25",className:"rounded-circle mr-2"}):Object(S.jsx)("i",{className:"fas fa-user-alt mr-2"}),Object(S.jsx)("span",{className:"lead",children:null===t?"An\xf3nimo":t})]}),Object(S.jsxs)("div",{children:[O&&Object(S.jsx)("i",{className:"fas fa-edit hover_blue p-2",onClick:function(){return k.apply(this,arguments)}}),O&&(j?Object(S.jsx)(W,{sm:!0}):Object(S.jsx)("i",{className:"fas fa-trash hover_red p-2",onClick:function(){return y.apply(this,arguments)}}))]})]})}),Object(S.jsxs)("div",{className:"card-body col-12 p-2",children:[Object(S.jsx)("p",{children:c}),Object(S.jsxs)("small",{children:["Posted: ",a]})]})]})};var z=function(e){var t=e.id,r=Object(g.c)((function(e){return e.articles.articles})),c=Object(n.useState)(""),a=Object(u.a)(c,2),s=a[0],i=a[1],l=Object(n.useState)(!0),o=Object(u.a)(l,2),d=o[0],b=o[1],j=Object(n.useState)(!1),m=Object(u.a)(j,2),p=m[0],h=m[1],f=Object(n.useState)(!1),O=Object(u.a)(f,2),x=O[0],v=O[1],N=Object(n.useState)([]),y=Object(u.a)(N,2),k=y[0],E=y[1],I=Object(w.g)().pathname.includes("/profile"),A=Object(g.b)(),D=Object(n.useCallback)((function(e){if(r.length>0&&!I&&!e)return b(!1),null;if(void 0===t&&I)return null;h(e);var n=t||!1;U.firstArticles(n).then((function(e){var r=e.articles,n=e.lastKey;t||A(_.setArticles(r)),t&&E(r),i(n),b(!1),h(!1)}))}),[A,t,r,I]);return Object(n.useEffect)((function(){var e=!0;return e&&D(!1),function(){return e=!1}}),[D]),Object(S.jsx)("div",{className:"card mt-2 mt-md-4 mx-md-1 row p-2 p-md-4 shadow",children:Object(S.jsxs)("div",{className:"card-body col-12",children:[Object(S.jsxs)("div",{className:"d-flex justify-content-between",children:[Object(S.jsx)("h4",{className:"text-center m-0",children:"Last Articles:"}),p?Object(S.jsx)(W,{}):Object(S.jsx)("i",{className:"fas fa-sync-alt border rounded p-2 hover",onClick:function(){return D(!0)}})]}),r.length>0&&!I?r.map((function(e,t){return Object(n.createElement)(Y,Object(T.a)(Object(T.a)({},e),{},{key:t}))})):null,k.length>0&&I?k.map((function(e,t){return Object(n.createElement)(Y,Object(T.a)(Object(T.a)({},e),{},{key:t}))})):null,0===k.length&&I&&!d&&Object(S.jsx)("p",{className:"my-2 text-center",children:"This account doesn't have articles"}),0===r.length&&!I&&!d&&Object(S.jsx)("p",{className:"my-2 text-center",children:"Nobody has uploaded anything be the first!"}),x&&!d?Object(S.jsx)("span",{children:"No more articles :("}):!d&&Object(S.jsx)("a",{href:"/#",className:"text-center d-block",onClick:function(e){b(!0),e.preventDefault();var r=t||!1;U.nextArticles(s,r).then((function(e){var r=e.articles,n=e.lastKey;t||A(_.addArticle(r)),t&&r.length>0&&E((function(e){return[].concat(Object(B.a)(e),Object(B.a)(r))})),i(n),0===r.length&&v(!0),b(!1)}))},children:"Load More!"}),d&&Object(S.jsx)(W,{center:!0})]})})};var K=function(){var e=Object(g.c)((function(e){return e.user.user}));return O(!1),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(G,{user:e}),Object(S.jsxs)("div",{className:"container",children:[Object(S.jsx)(P,{}),Object(S.jsx)(z,{})]})]})};var M=function(){var e=Object(n.useState)(""),t=Object(u.a)(e,2),r=t[0],c=t[1],a=Object(n.useRef)(),s=function(){var e=Object(o.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.sendPasswordResetEmail(a.current.value);case 3:c("You have to check your email and follow the instructions"),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),c(e.t0.message);case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return O(!0),Object(S.jsx)("div",{className:"container vh100 d-flex align-items-center justify-content-center",children:Object(S.jsxs)("div",{className:"card p-4",children:[Object(S.jsx)("div",{className:"card-title",children:Object(S.jsx)("h4",{className:"text-center display-4",children:"Recover my account"})}),Object(S.jsxs)("div",{className:"form-group",children:[Object(S.jsx)("label",{htmlFor:"resetpassword"}),Object(S.jsx)("input",{ref:a,id:"resetpassword",type:"text",className:"form-control",placeholder:"Write your email..."})]}),Object(S.jsx)("button",{className:"btn btn-primary btn-block",onClick:s,children:"Send Email"}),Object(S.jsx)("small",{className:"my-2 text-center",children:r}),Object(S.jsx)(d.b,{to:"/signin",children:Object(S.jsx)("small",{className:"text-center mt-1",children:"Back to Sign in"})})]})})};function H(){return(H=Object(o.a)(l.a.mark((function e(t){var r,n,c,a,s,i;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(null===t||void 0===t||null===(r=t.type)||void 0===r?void 0:r.includes("image"))){e.next=14;break}return(n=new FormData).append("file",t),n.append("upload_preset","mhxqfgbm"),c={method:"POST",body:n},e.next=8,fetch("https://api.cloudinary.com/v1_1/dalnxbdem/image/upload",c);case 8:return a=e.sent,e.next=11,a.json();case 11:return s=e.sent,i=s.url,e.abrupt("return",i);case 14:return e.abrupt("return",!1);case 17:return e.prev=17,e.t0=e.catch(0),e.abrupt("return","error");case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}var q=function(e){return H.apply(this,arguments)};var J=function(){var e=Object(g.c)((function(e){return e.user.user})),t=Object(n.useState)(!1),r=Object(u.a)(t,2),c=r[0],a=r[1],s=Object(n.useState)(e.name),i=Object(u.a)(s,2),d=i[0],b=i[1],j=Object(n.useState)(""),m=Object(u.a)(j,2),p=m[0],f=m[1],O=Object(n.useState)(""),x=Object(u.a)(O,2),v=x[0],N=x[1],k=Object(n.useRef)(),E=Object(n.useRef)(""),I=Object(g.b)(),A=Object(w.f)(),_=function(){var t=Object(o.a)(l.a.mark((function t(){var r,n,s,i,o,u,d;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r="",n=E.current.value,s=k.current.files[0],!1!==c){t.next=5;break}return t.abrupt("return",a(!0));case 5:if(void 0!==s||e.name!==n){t.next=7;break}return t.abrupt("return",f("You didn't change anything"));case 7:if(!(n<6)){t.next=9;break}return t.abrupt("return",f("Your name can't have less of 6 words"));case 9:return t.prev=9,t.next=12,U.thisNameExists(n);case 12:if(o=t.sent,(null===(i=o.docs[0])||void 0===i?void 0:i.id)===e.id){t.next=17;break}if(!!o.empty){t.next=17;break}return t.abrupt("return",f("This name already exist, try change it"));case 17:return t.next=19,q(s);case 19:if(!1!==(u=t.sent)&&"error"!==u&&(r=u),"error"!==u){t.next=23;break}return t.abrupt("return",f("Error uploading the image"));case 23:return d=""!==r?r:e.photoURL,t.next=26,U.updateNameAndPhoto(n,d,e.id);case 26:N("Your profile has been updated"),I(y.setUser(Object(T.a)(Object(T.a)({},e),{},{name:E.current.value,photoURL:d}))),f(""),t.next=34;break;case 31:t.prev=31,t.t0=t.catch(9),f("An unexpected error happened");case 34:case"end":return t.stop()}}),t,null,[[9,31]])})));return function(){return t.apply(this,arguments)}}(),D=function(){var t=Object(o.a)(l.a.mark((function t(){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.confirm("All your information including your articles will be deleted and this action is irreversible, do you want to continue?")){t.next=5;break}return t.next=3,U.deleteAccount(e.id);case 3:h.signOut(),A.push("/signin");case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(G,{user:e}),Object(S.jsxs)("div",{className:"container row mx-auto m-0 p-0 p-md-2",children:[Object(S.jsxs)("div",{className:"card p-4 col-md-3 m-2",children:[null!==e.photoURL?Object(S.jsx)("img",{className:"mx-auto rounded-circle avatar",width:"100",height:"100",alt:"profile",src:e.photoURL}):Object(S.jsx)("i",{className:"fas fa-user-alt mr-2 text-center",style:{fontSize:70}}),Object(S.jsxs)("div",{className:"card-title mt-3 text-center",children:[Object(S.jsx)("h4",{children:null===e.name?"An\xf3nimo":e.name}),Object(S.jsx)("small",{children:e.email})]}),Object(S.jsx)("button",{className:"btn btn-danger",onClick:D,children:"Delete this account"})]}),Object(S.jsx)("div",{className:"card col-md-8 m-2 row",children:Object(S.jsxs)("div",{className:"card-body col-12 d-flex flex-column justify-content-between p-2 p-md-3",children:[Object(S.jsxs)("form",{children:[Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{htmlFor:"user_name",className:"col-sm-2 col-form-label",children:"Name"}),Object(S.jsx)("div",{className:"col-sm-10",children:Object(S.jsx)("input",{ref:E,type:"text",className:"form-control",id:"user_name",value:d,onChange:function(e){return b(e.target.value)},disabled:!c})})]}),Object(S.jsxs)("div",{className:"form-group row",children:[Object(S.jsx)("label",{htmlFor:"user_photo",className:"col-sm-2 col-form-label",children:"Image"}),Object(S.jsx)("div",{className:"col-sm-10",children:Object(S.jsx)("input",{ref:k,type:"file",className:"form-control-file",id:"user_photo",disabled:!c})})]})]}),""!==p&&Object(S.jsx)("div",{className:"alert alert-danger",children:p}),""!==v&&Object(S.jsx)("div",{className:"alert alert-success",children:v}),Object(S.jsx)("button",{className:"btn btn-success",onClick:_,children:"Update Info"})]})})]})]})};var Z=function(e){var t=e.user;return void 0===t.id?Object(S.jsx)("div",{className:"card p-4 col-md-3 m-4 h-25",children:Object(S.jsx)(W,{center:!0})}):Object(S.jsx)(S.Fragment,{children:Object(S.jsxs)("div",{className:"card p-4 col-md-3 m-4 h-25",children:[null!==t.photoURL?Object(S.jsx)("img",{className:"mx-auto rounded-circle",width:"100",height:"100",alt:"profile",src:t.photoURL}):Object(S.jsx)("i",{className:"fas fa-user-alt mr-2 text-center",style:{fontSize:70}}),Object(S.jsx)("div",{className:"card-title mt-3 text-center",children:Object(S.jsx)("h4",{children:null===t.name?"An\xf3nimo":t.name})})]})})};var Q=function(e){var t=Object(g.c)((function(e){return e.user.user})),r=Object(g.c)((function(e){return e.profile.profileId})),c=Object(n.useState)({}),a=Object(u.a)(c,2),s=a[0],i=a[1];return Object(n.useEffect)((function(){U.getUserInfoById(r).then((function(e){i(e)}))}),[r]),Object(S.jsxs)(S.Fragment,{children:[Object(S.jsx)(G,{user:t}),Object(S.jsxs)("div",{className:"row mx-auto",children:[Object(S.jsx)(Z,{user:s}),Object(S.jsx)("div",{className:"col-md-8",children:Object(S.jsx)(z,{id:s.id})})]})]})};var V=function(){var e=Object(g.c)((function(e){return e.user.user}));return Object(S.jsx)(d.a,{children:Object(S.jsxs)(w.c,{children:[Object(S.jsx)(w.a,{exact:!0,path:"/",component:void 0===e.id?I:K}),Object(S.jsx)(w.a,{path:"/signin",component:I}),Object(S.jsx)(w.a,{path:"/signup",component:A}),Object(S.jsx)(w.a,{path:"/home",component:void 0===e.id?I:K}),Object(S.jsx)(w.a,{path:"/recover",component:M}),Object(S.jsx)(w.a,{path:"/settings",component:void 0===e.id?I:J}),Object(S.jsx)(w.a,{path:"/profile",component:void 0===e.id?I:Q})]})})},X=r(30),$={user:{}};var ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case N.SET_USER:return Object(T.a)(Object(T.a)({},e),{},{user:n});default:return e}},te={articles:[]};var re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case N.ADD_ARTICLE:return(null===n||void 0===n?void 0:n.length)?Object(T.a)(Object(T.a)({},e),{},{articles:[].concat(Object(B.a)(e.articles),Object(B.a)(n))}):(null===n||void 0===n?void 0:n.name)?Object(T.a)(Object(T.a)({},e),{},{articles:[n].concat(Object(B.a)(e.articles))}):e;case N.SET_ARTICLE:return Object(T.a)(Object(T.a)({},e),{},{articles:n});default:return e}},ne={editing:!1,editingDoc:{}};var ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ne,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case N.SET_EDITING:return Object(T.a)(Object(T.a)({},e),{},{editing:n});case N.SET_EDITING_DOC:return Object(T.a)(Object(T.a)({},e),{},{editingDoc:n});default:return e}},ae={profileId:null};var se=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0,r=t.type,n=t.payload;switch(r){case N.SET_PROFILE_ID:return Object(T.a)(Object(T.a)({},e),{},{profileId:n});default:return e}},ie=Object(X.a)({user:ee,articles:re,editing:ce,profile:se}),le=Object(X.b)(ie);var oe=function(){return Object(S.jsx)(g.a,{store:le,children:Object(S.jsx)(V,{})})};r(51),r(52);s.a.render(Object(S.jsx)(c.a.StrictMode,{children:Object(S.jsx)(oe,{})}),document.getElementById("root"))}},[[53,1,2]]]);
//# sourceMappingURL=main.8af97adf.chunk.js.map